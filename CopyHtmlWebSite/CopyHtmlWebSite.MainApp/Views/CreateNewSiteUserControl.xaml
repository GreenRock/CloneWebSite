<UserControl x:Class="CopyHtmlWebSite.MainApp.Views.CreateNewSiteUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:controls="clr-namespace:CopyHtmlWebSite.MainApp.Controls"
             prism:ViewModelLocator.AutoWireViewModel="True" x:Name="CreateNewSite">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Assests/ResourceDictionaryBase.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="TextBoxStyle" TargetType="TextBox">
                <Setter Property="Margin" Value="5"/>
                <Setter Property="Height" Value="30"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
            </Style>
            <Style x:Key="LabelStyle" TargetType="Label">
                <Setter Property="Margin" Value="5"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition  Height="40"/>
            <RowDefinition  Height="40"/>
            <RowDefinition  Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="8*"/>
            <ColumnDefinition Width="50"/>
        </Grid.ColumnDefinitions>

        <Label Content="Site name:"  
               Grid.Row="0" 
               Grid.Column="0"
               Style="{ StaticResource LabelStyle }"/>
        <TextBox Grid.Row="0" 
                 Grid.Column="1" 
                 Text="{ Binding SiteName }" 
                 Style="{ StaticResource TextBoxStyle }">
            <controls:WatermarkService.Watermark>
                <TextBlock>Site name</TextBlock>
            </controls:WatermarkService.Watermark>
        </TextBox>
        <Button Grid.Row="0" 
                Grid.Column="2"
                Style="{ StaticResource ButtonBase }"
                ToolTip="Add a new site"
                Command="{ Binding AddSiteCommand }">
            <Image Height="30" Width="30" Source="../Resources/save.png"/>
        </Button>

        <TextBox Text="{ Binding PageName }" 
                 Grid.Row="1" 
                 Grid.Column="0" 
                 Style="{ StaticResource TextBoxStyle }">
            <controls:WatermarkService.Watermark>
                <TextBlock>Page name</TextBlock>
            </controls:WatermarkService.Watermark>
        </TextBox>
        <TextBox Text="{ Binding PageLink }"
                 Grid.Row="1" 
                 Grid.Column="1" 
                 Style="{ StaticResource TextBoxStyle }">
            <controls:WatermarkService.Watermark>
                <TextBlock>Page link</TextBlock>
            </controls:WatermarkService.Watermark>
        </TextBox>

        <Button Grid.Row="1" 
                Grid.Column="2" 
                Command="{ Binding AddNewPageCommand }"  
                CommandParameter="{ Binding Page }"
                Style="{ StaticResource ButtonBase }" 
                ToolTip="Add a new page">
            <Image Height="30" Width="30" Source="../Resources/add.png"/>
        </Button>

        <ListView Grid.Row="2" 
                  Grid.Column="0" 
                  Grid.ColumnSpan="3" 
                  ItemsSource="{ Binding Pages }" 
                  SelectedItem="{ Binding PageSelected }" 
                  HorizontalAlignment="Stretch">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="100">
                        <GridViewColumn.HeaderTemplate>
                            <DataTemplate>
                                <Label Padding="10" HorizontalAlignment="Stretch" Content="Page name"/>
                            </DataTemplate>
                        </GridViewColumn.HeaderTemplate>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Label Padding="10" HorizontalAlignment="Stretch" Content="{ Binding Name }"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Width="450">
                        <GridViewColumn.HeaderTemplate>
                            <DataTemplate>
                                <Label Padding="10" HorizontalAlignment="Stretch" Content="Page link"/>
                            </DataTemplate>
                        </GridViewColumn.HeaderTemplate>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Padding="10" Width="450" HorizontalAlignment="Stretch" Text="{ Binding Link }"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Width="50">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Style="{ StaticResource ButtonBase }"
                                        ToolTip="Add a new site"
                                        HorizontalAlignment="Center"
                                        Command="{ Binding ElementName=CreateNewSite, Path=DataContext.RemovePageCommand}" CommandParameter="{ Binding }">
                                    <Image Height="30" Width="30" Source="../Resources/remove.png"/>
                                </Button>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</UserControl>
